# WebApp架构简介

## 前端技术选型

> 项目需求是怎么样的

    传统的多页网站不会选择React作为前端框架，单页应用选择jQuery来做也会很困难，所以不同的项目适合不的技术栈。

> 区分项目类型

    1. 两大分类：单页应用(所有内容前端生成)、多页应用（传统网站）。
    2. 多页应用的特征:
       a: 所有内容都由服务端用模板(jsp等)生成;
       b: 每次页面跳转都需要经过服务端;
       c: js作用更多是做一些动画效果等;
    
       常用类库: jQuery、mootools(https://mootools.net/)、YUI,都是对DOM层面进行封装;
       架构工具：前端无特定工具，跟后端配合；直至后来有grunt(https://gruntjs.com/getting-started)、glup
       模块化工具：无，后来解决重复引用问题的两个工具：seajs、requirejs
       静态文件处理：使用gulp或grunt等工具编译在html中，自由度低，操作复杂；或者不处理，交给后端，让后端通过
       服务去处理
    
    3. 单页应用的特征:
       a: 所有类容都在前端生成;
       b: JS承担更多的业务逻辑，后端只提供API;
       c: 页面路由调转不需要经过后端;
    
       常用类库: React(jsx语法) Vue(.vue) Angular(ts) (Backbone(前端mvc，出现在Angular之前)),三个框架都
       在dom的上层进行封装，隔离DOM，因此就可以支持服务端渲染；
       架构工具：npm、bower、jspm(面向未来)
       模块化工具：webpack、rollup(效率高Tree-Shaking)、browserify(不太适合单页应用)
       静态文件处理：在js中直接引用，模块化工具转化成可用的静态资源



> 其它考虑因素

    1. 浏览器兼容性（必须在指定浏览器访问）
    2. toB(浏览器兼容要求比较低、交互要求比较低、功能复杂度高，选择一些框架)还是toC(性能要求高，功能复杂度
    低)
    3. 移动端还是PC端(分辨率、网速等因素)

## 工程架构

> 解放生产力(聚焦业务代码，解决重复的工作(文件复制、刷新浏览器、重启服务等)) 

1.  源代码预处理（babel编译）
2.  自动打包、自动更新页面显示 
3.  自动处理图片依赖、保证开发环境和正式环境的统一 

> 围绕解决方案搭建环境  （React、Vue、Angular）对应的解决方案

1.  不同的前端框架需要不同的运行架构 
2.  预期可能出现的问题并规避 

> 保证项目质量（代码规范、方便排错、提高效率） 

1.  code lint ,规范代码: 解决 一些代码规范引发的问题
2.  不同环境排除差异（如break lines）（window mac等开发不同引发的问题）
3.  EditorConfig 统一编辑器  （解决不同环境下的编辑环境的不同特性.editorconfig）
4.  git commit 预处理(husky) 

> 定制（对使用工具的方法了如指掌最终自己写出一个类似webpack的框架） 

1.  目标：项目稳定跑起来、提高开发效率 



## 项目架构

> 目标

1.  更多的考虑网页如何去运行、代码如何去分层、更好的实现功能、为将来扩展留空间 

> 技术选型（具体的项目）

1.  选择合适的框架 （如React + Mobx）
2.  数据解决方案 （flux、redux、mobx）、请求方式
3.  整体的代码风格： 如数据存储,什么数据存储在mobx里，什么数据存储在当前页面

## web开发中常用的网络优化

> 常用的优化方法

1.  合并资源文件，减少HTTP请求  (浏览器并发的http请求数量限制pc端8个、移动端6个，过多阻塞)
2.  压缩资源文件减少请求大小 (http请求时间 与文件大小有关)
3.  合理利用缓存机制、尽可能使用缓存减少请求  （设置cache-control）; 文件加上hash值

 